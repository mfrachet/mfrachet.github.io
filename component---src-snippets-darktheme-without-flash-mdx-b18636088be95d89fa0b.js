"use strict";(self.webpackChunkmarvin_frachet=self.webpackChunkmarvin_frachet||[]).push([[301],{3705:function(a,e,n){n.r(e),n.d(e,{_frontmatter:function(){return m},default:function(){return k}});var t=n(3366),s=(n(7294),n(4983)),p=n(4655),o=["components"],m={},c={_frontmatter:m},r=p.Z;function k(a){var e=a.components,n=(0,t.Z)(a,o);return(0,s.kt)(r,Object.assign({},c,n,{components:e,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"This tricks comes from ",(0,s.kt)("a",{parentName:"p",href:"https://twitter.com/JoshWComeau"},"Josh W Comeau")," and is detailed in ",(0,s.kt)("a",{parentName:"p",href:"https://www.joshwcomeau.com/react/dark-mode/"},"The Quest for the Perfect Dark Mode"),"."),(0,s.kt)("p",null,"The problem solved is: ",(0,s.kt)("strong",{parentName:"p"},"how to avoid the first flash when resolving a theme from the local storage on first load?")),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"html"},(0,s.kt)("pre",{parentName:"div",className:"language-html"},(0,s.kt)("code",{parentName:"pre",className:"language-html"},(0,s.kt)("span",{parentName:"code",className:"token doctype"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<!"),(0,s.kt)("span",{parentName:"span",className:"token doctype-tag"},"DOCTYPE")," ",(0,s.kt)("span",{parentName:"span",className:"token name"},"html"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"html"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"head"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"title"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"Title of the page",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"title"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n\n    ",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"script"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.kt)("span",{parentName:"code",className:"token script"},(0,s.kt)("span",{parentName:"span",className:"token language-javascript"},"\n      ",(0,s.kt)("span",{parentName:"span",className:"token comment"},"// This script is blocking and the document won't be shown"),"\n      ",(0,s.kt)("span",{parentName:"span",className:"token comment"},"// unless this script has finished its job. It's"),"\n      ",(0,s.kt)("span",{parentName:"span",className:"token comment"},"// the perfect place to resolve the theme from"),"\n      ",(0,s.kt)("span",{parentName:"span",className:"token comment"},"// local storage and play with it"),"\n      ",(0,s.kt)("span",{parentName:"span",className:"token keyword"},"var")," DarkTheme ",(0,s.kt)("span",{parentName:"span",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"\n        text",(0,s.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,s.kt)("span",{parentName:"span",className:"token string"},'"white"'),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},","),"\n        background",(0,s.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,s.kt)("span",{parentName:"span",className:"token string"},'"black"'),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},","),"\n      ",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},";"),"\n\n      ",(0,s.kt)("span",{parentName:"span",className:"token keyword"},"var")," LightTheme ",(0,s.kt)("span",{parentName:"span",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"\n        text",(0,s.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,s.kt)("span",{parentName:"span",className:"token string"},'"black"'),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},","),"\n        background",(0,s.kt)("span",{parentName:"span",className:"token operator"},":")," ",(0,s.kt)("span",{parentName:"span",className:"token string"},'"white"'),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},","),"\n      ",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},";"),"\n\n      ",(0,s.kt)("span",{parentName:"span",className:"token keyword"},"var")," actualTheme ",(0,s.kt)("span",{parentName:"span",className:"token operator"},"=")," window",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),"localStorage",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"span",className:"token function"},"getItem"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"span",className:"token string"},'"theme"'),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"span",className:"token operator"},"||")," ",(0,s.kt)("span",{parentName:"span",className:"token string"},'"dark"'),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},";"),"\n      ",(0,s.kt)("span",{parentName:"span",className:"token keyword"},"var")," theme ",(0,s.kt)("span",{parentName:"span",className:"token operator"},"=")," actualTheme ",(0,s.kt)("span",{parentName:"span",className:"token operator"},"===")," ",(0,s.kt)("span",{parentName:"span",className:"token string"},'"light"')," ",(0,s.kt)("span",{parentName:"span",className:"token operator"},"?")," LightTheme ",(0,s.kt)("span",{parentName:"span",className:"token operator"},":")," DarkTheme",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},";"),"\n\n      ",(0,s.kt)("span",{parentName:"span",className:"token keyword"},"var")," root ",(0,s.kt)("span",{parentName:"span",className:"token operator"},"=")," window",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),"document",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),"documentElement",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},";"),"\n      root",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),"style",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"span",className:"token function"},"setProperty"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"span",className:"token string"},'"--color-text"'),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," theme",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),"text",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},";"),"\n      root",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),"style",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"span",className:"token function"},"setProperty"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"span",className:"token string"},'"--color-text"'),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," theme",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),"background",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},";"),"\n\n      ",(0,s.kt)("span",{parentName:"span",className:"token comment"},"// But we can't use document.querySelector or rely on other magic"),"\n      ",(0,s.kt)("span",{parentName:"span",className:"token comment"},"// because the browser has not finished processing the whole document"),"\n    ")),(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"script"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"head"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n\n  ",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"body"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n    Content of the website\n  ",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"body"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n\n  ",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"script"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.kt)("span",{parentName:"code",className:"token script"},(0,s.kt)("span",{parentName:"span",className:"token language-javascript"},"\n    ",(0,s.kt)("span",{parentName:"span",className:"token comment"},'// however, when reaching this script, "actualTheme" is resolved,'),"\n    ",(0,s.kt)("span",{parentName:"span",className:"token comment"},'// so is "document" and we have access to the whole document.'),"\n    ",(0,s.kt)("span",{parentName:"span",className:"token comment"},"// This is usuallywhere frontend frameworks loads"),"\n    ",(0,s.kt)("span",{parentName:"span",className:"token comment"},"// and hydrates the document."),"\n    console",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"span",className:"token function"},"log"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"span",className:"token string"},'"The theme is"'),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," actualTheme",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},";"),"\n  ")),(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"script"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"html"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">"))))))}k.isMDXComponent=!0},4655:function(a,e,n){n.d(e,{Z:function(){return c}});var t=n(7294),s=n(4983),p=n(5414),o=n(6455),m={};function c(a){var e=a.children,n=a.pageContext.frontmatter;return t.createElement(s.Zo,{components:m},t.createElement(o.L,null,t.createElement(p.q,null,t.createElement("html",{lang:"en"}),t.createElement("title",null,n.title),t.createElement("meta",{name:"description",content:n.excerpt}),t.createElement("meta",{property:"og:description",content:n.excerpt}),t.createElement("meta",{name:"keywords",content:"HTML, CSS, JavaScript, Accessibility, A11y, e2e, tests, testing, React, React Native"}),t.createElement("meta",{property:"og:title",content:n.title}),t.createElement("meta",{property:"og:image",content:n.metaImage}),t.createElement("meta",{name:"author",content:"Marvin Frachet"})),t.createElement("main",{"aria-labelledby":"title",className:"wrapper"},t.createElement("h1",{id:"title"},n.title),e)))}},3366:function(a,e,n){function t(a,e){if(null==a)return{};var n,t,s={},p=Object.keys(a);for(t=0;t<p.length;t++)n=p[t],e.indexOf(n)>=0||(s[n]=a[n]);return s}n.d(e,{Z:function(){return t}})}}]);
//# sourceMappingURL=component---src-snippets-darktheme-without-flash-mdx-b18636088be95d89fa0b.js.map