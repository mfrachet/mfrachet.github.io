"use strict";(self.webpackChunkmarvin_frachet=self.webpackChunkmarvin_frachet||[]).push([[639],{1294:function(a,e,t){t.r(e),t.d(e,{_frontmatter:function(){return m},default:function(){return r}});var n=t(3366),s=(t(7294),t(4983)),o=t(4655),p=t(474),c=["components"],m={},k={_frontmatter:m},N=o.Z;function r(a){var e=a.components,t=(0,n.Z)(a,c);return(0,s.kt)(N,Object.assign({},k,t,{components:e,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"This is a hook that is very useful when a dialog is opened and that we want to close it when clicking outside of it."),(0,s.kt)("h2",null,"Example"),(0,s.kt)(p.y,{mdxType:"ClickOutsideElement"}),(0,s.kt)("h2",null,"Implementation"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"jsx"},(0,s.kt)("pre",{parentName:"div",className:"language-jsx"},(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token function-variable function"},"useClickOutside")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"ref",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," callback"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," callbackRef ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"useRef"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"callback",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// Keep the callback fresh between renders"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token comment"},'// preventing from passing "callback" to the useEffect'),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token comment"},'// that would clear the listener on every render when "callback" reference changes'),"\n  callbackRef",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"current ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," callback",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.kt)("span",{parentName:"code",className:"token function"},"useEffect"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token function-variable function"},"handleMouseUp")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"e"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// Do not trigger click outside on auxiliary buttons"),"\n      ",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// See MDN => https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button#value"),"\n      ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"e",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"button ",(0,s.kt)("span",{parentName:"code",className:"token operator"},">")," ",(0,s.kt)("span",{parentName:"code",className:"token number"},"0"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,s.kt)("span",{parentName:"code",className:"token boolean"},"false"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n      ",(0,s.kt)("span",{parentName:"code",className:"token comment"},'// Verify if the clicked element is contained by the one stored in "ref"'),"\n      ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token operator"},"!"),"ref",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"current",(0,s.kt)("span",{parentName:"code",className:"token operator"},"?."),(0,s.kt)("span",{parentName:"code",className:"token function"},"contains"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"e",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"target",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        callbackRef",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"current"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"e",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n      ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n    document",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"addEventListener"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},'"mouseup"'),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," handleMouseUp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n    ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      document",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"removeEventListener"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},'"mouseup"'),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," handleMouseUp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"]"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.kt)("p",null,"Almost copy / paste from what ",(0,s.kt)("a",{parentName:"p",href:"https://chakra-ui.com/"},"Chakra UI")," does in ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/chakra-ui/chakra-ui/blob/d1da680a2c29cf183a4f69bc1c5cc2aed0629345/packages/hooks/src/use-outside-click.ts"},(0,s.kt)("code",{parentName:"a",className:"language-text"},"useClickOutside")),"."),(0,s.kt)("h2",null,"Usage"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"jsx"},(0,s.kt)("pre",{parentName:"div",className:"language-jsx"},(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token function-variable function"},"Component")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," modalRef ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," React",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"useRef"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token keyword"},"null"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"["),"showContent",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," setShowContent",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"]")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," React",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"useState"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token boolean"},"false"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.kt)("span",{parentName:"code",className:"token function"},"useClickOutside"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"modalRef",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"setShowContent"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token boolean"},"false"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"div"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.kt)("span",{parentName:"code",className:"token plain-text"},"\n      "),(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"button")," ",(0,s.kt)("span",{parentName:"span",className:"token attr-name"},"onClick"),(0,s.kt)("span",{parentName:"span",className:"token script language-javascript"},(0,s.kt)("span",{parentName:"span",className:"token script-punctuation punctuation"},"="),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"{"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"span",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"span",className:"token function"},"setShowContent"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"span",className:"token boolean"},"true"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"}")),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.kt)("span",{parentName:"code",className:"token plain-text"},"Toggle content"),(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"button"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.kt)("span",{parentName:"code",className:"token plain-text"},"\n\n      "),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"showContent ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"&&")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"\n        ",(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"div")," ",(0,s.kt)("span",{parentName:"span",className:"token attr-name"},"ref"),(0,s.kt)("span",{parentName:"span",className:"token script language-javascript"},(0,s.kt)("span",{parentName:"span",className:"token script-punctuation punctuation"},"="),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"{"),"modalRef",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"}")),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.kt)("span",{parentName:"code",className:"token plain-text"},"\n          "),(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"p"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.kt)("span",{parentName:"code",className:"token plain-text"},"\n            This is the content. If you click outside the box, the content will\n            be hidden.\n          "),(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"p"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.kt)("span",{parentName:"code",className:"token plain-text"},"\n\n          "),(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"<"),"button"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.kt)("span",{parentName:"code",className:"token plain-text"},"Clicking inside"),(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"button"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.kt)("span",{parentName:"code",className:"token plain-text"},"\n        "),(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"div"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n      ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token plain-text"},"\n    "),(0,s.kt)("span",{parentName:"code",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token tag"},(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"</"),"div"),(0,s.kt)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))))}r.isMDXComponent=!0},4655:function(a,e,t){t.d(e,{Z:function(){return m}});var n=t(7294),s=t(4983),o=t(5414),p=t(6455),c={};function m(a){var e=a.children,t=a.pageContext.frontmatter,m="/meta/"+t.metaImage;return n.createElement(s.Zo,{components:c},n.createElement(p.L,null,n.createElement(o.q,null,n.createElement("html",{lang:"en"}),n.createElement("title",null,t.title),n.createElement("meta",{name:"description",content:t.excerpt}),n.createElement("meta",{property:"og:description",content:t.excerpt}),n.createElement("meta",{name:"keywords",content:"HTML, CSS, JavaScript, Accessibility, A11y, e2e, tests, testing, React, React Native"}),n.createElement("meta",{property:"og:title",content:t.title}),n.createElement("meta",{property:"og:image",content:m}),n.createElement("meta",{name:"author",content:"Marvin Frachet"})),n.createElement("main",{"aria-labelledby":"title",className:"wrapper"},n.createElement("h1",{id:"title"},t.title),e)))}},3366:function(a,e,t){function n(a,e){if(null==a)return{};var t,n,s={},o=Object.keys(a);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)>=0||(s[t]=a[t]);return s}t.d(e,{Z:function(){return n}})}}]);
//# sourceMappingURL=component---src-snippets-clicking-outside-element-mdx-66960b9d025e913f0d81.js.map